<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Paint</title>
		<style>
			#container { position: relative; }
			#imageView { border: 1px solid #000; }
		</style>
	</head>
	<body>
		<div id="container">
			<canvas id="imageView" width="400" height="300">
				<p>Unfortunately, your browser is currently unsupported by our web application. We are sorry for the inconvenience. Please use one of the supported browsers listed below, or draw the image you want using an offline tool.</p>
				<p>Supported browsers: <a href="https://www.opera.com">Opera</a>, <a href="http://www.mozilla.com">Firefox</a>, <a href="http://www.apple.com/safari">Safari</a>, and <a href="http://www.konqueror.org">Konqueror</a>.</p>
			</canvas>
		</div>
		<script src="example1.js"></script>
        <label>Drawing tool:
	<select id="dtool">
		<option value="rect">Rectangle</option>
		<option value="pencil">Pencil</option>
	</select>
</label>
	</body>
</html>
<script>
var canvas, context, canvaso, contexto;

function init () {
	// Find the canvas element
	canvaso = document.getElementById('imageView');
	if (!canvaso) {
		alert('Error: I cannot find the canvas element!');
		return;
	}

	if (!canvaso.getContext) {
		alert('Error: no canvas.getContext!');
		return;
	}

	// Get the 2D canvas context
	contexto = canvaso.getContext('2d');
	if (!contexto) {
		alert('Error: failed to getContext!');
		return;
	}

	// Add the temporary canvas
	var container = canvaso.parentNode;
	canvas = document.createElement('canvas');
	if (!canvas) {
		alert('Error: I cannot create a new <canvas> element!');
		return;
	}

	canvas.id = 'imageTemp';
	canvas.width = canvaso.width;
	canvas.height = canvaso.height;
	container.appendChild(canvas);

	context = canvas.getContext('2d');
}
// This function draws the #imageTemp canvas on top of #imageView,
// after which #imageTemp is cleared. This function is called each time when the
// user completes a drawing operation
function img_update () {
	contexto.drawImage(canvas, 0, 0);
	context.clearRect(0, 0, canvas.width, canvas.height);
}
// The drawing pencil
tools.pencil = function () {
	this.mouseup = function (ev) {
		if (tool.started) {
			tool.mousemove(ev);
			tool.started = false;
			img_update();
		}
	};
};


</script>
<style>
	#container { position: relative; }
	#imageView { border: 1px solid #000; }
	#imageTemp { position: absolute; top: 1px; left: 1px; }
</style>
